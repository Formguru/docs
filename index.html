
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the Guru API"
        >
    <title>Guru API</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;,&quot;typescript&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-d2e61f10.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="typescript">typescript</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#api" class="toc-h1 toc-link" data-title="API">API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction" class="toc-h2 toc-link" data-title="Introduction">Introduction</a>
                  </li>
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#videos" class="toc-h2 toc-link" data-title="Videos">Videos</a>
                  </li>
                  <li>
                    <a href="#errors" class="toc-h2 toc-link" data-title="Errors">Errors</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#guru-js" class="toc-h1 toc-link" data-title="Guru.js">Guru.js</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#process" class="toc-h2 toc-link" data-title="Process">Process</a>
                  </li>
                  <li>
                    <a href="#render" class="toc-h2 toc-link" data-title="Render">Render</a>
                  </li>
                  <li>
                    <a href="#analyze" class="toc-h2 toc-link" data-title="Analyze">Analyze</a>
                  </li>
                  <li>
                    <a href="#appendix-a" class="toc-h2 toc-link" data-title="Appendix A">Appendix A</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='api'>API</h1><h2 id='introduction'>Introduction</h2>
<p>Welcome to the Guru API. This API allows you to upload and perform analysis on your workouts and exercise.
See below to find out how to authenticate your calls and start working with the API.</p>

<p>If you would like to integrate and require assistance then please <a href="mailto:support@getguru.fitness">contact us</a>.</p>
<h2 id='authentication'>Authentication</h2>
<p>Authentication with the Guru API occurs using OAuth tokens. You must include your authentication token as a header on each request you make:</p>

<p><code>Authorization: &lt;token&gt;</code></p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://customer-console-prod.auth.us-west-2.amazoncognito.com/oauth2/token</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/x-www-form-urlencoded</span><span class="dl">'</span> <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">grant_type=client_credentials&amp;client_id=</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">client_id</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&amp;client_secret=</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">client_secret</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&amp;scope=https://api.getguru.fitness/default</span><span class="dl">'</span> <span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>Your service will obtain its authentication token using an OAuth Client-Credential Flow.
If you are a newly-integrating service then you will need to create an account with Guru via the <a href="https://console.getguru.fitness">Console</a> to access your credentials.
Please see the <a href="https://blog.getguru.fitness/2022/03/24/getting-started-with-guru.html">Getting Started with Guru</a> guide for more details on account creation.</p>

<p>Once you have your access credentials, the authentication flow will be:</p>

<ol>
<li>Exchange your client ID and secret with <code>https://customer-console-prod.auth.us-west-2.amazoncognito.com</code> for an access token. The value of the <code>expires_in</code> field in the response is the number of seconds until this token expires.</li>
<li>Store the token along with its expiration date in persistent storage so that it can be re-used on each call. It is important to not request new tokens on each call as your application will be rate limited.</li>
<li>Before making a call to the Guru API, check if the token is expired and, if so, refresh it.</li>
<li>Make the call to the Guru API using the access token.</li>
</ol>

<p>See the example on this page for working code to perform the credential exchange.
See <a href="https://auth0.com/docs/get-started/authentication-and-authorization-flow/client-credentials-flow">here</a> for more details on implementing the Client-Credential flow.</p>
<h2 id='videos'>Videos</h2>
<p>Uploading a video for analysis is a three-step process:</p>

<ol>
<li>Call the <a href="#create-video">Create API</a> to specify the video&#39;s metadata. This will tell Guru some basic information about the video such as its size, and also include optional additional information such as the activity being performed in the video. This information helps deliver more accurate analysis results. The API will return a URL that specifies where the video should be uploaded to.</li>
<li>Upload the video content to the URL returned in step 1. The video will be encoded as <code>multipart/form-data</code> in the request.</li>
<li>Poll the <a href="#get-analysis">Analysis API</a> until the video is ready. It will typically take 30 seconds for analysis to complete, though longer wait times may be experienced for larger videos.</li>
</ol>

<p>See below for details on each individual API call.</p>
<h3 id='create-video'>Create Video</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">axios</span><span class="p">({</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.getguru.fitness/videos</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">Authorization</span><span class="p">:</span> <span class="nx">token</span>
    <span class="p">},</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">filename</span><span class="p">:</span> <span class="dl">'</span><span class="s1">workout.mp4</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">size</span><span class="p">:</span> <span class="o">&lt;&lt;</span><span class="nx">video</span><span class="o">-</span><span class="nx">size</span><span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="nx">bytes</span><span class="o">&gt;&gt;</span><span class="p">,</span>
        <span class="na">domain</span><span class="p">:</span> <span class="dl">'</span><span class="s1">weightlifting</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">activity</span><span class="p">:</span> <span class="dl">'</span><span class="s1">squat</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">repCount</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
        <span class="na">source</span><span class="p">:</span> <span class="dl">'</span><span class="s1">my-service</span><span class="dl">'</span>
    <span class="p">}</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">formData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">();</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">fields</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">key</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">fields</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
    <span class="p">});</span>
    <span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">"</span><span class="s2">file</span><span class="dl">"</span><span class="p">,</span> <span class="nx">video</span><span class="p">);</span>

    <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span>
        <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span>
        <span class="nx">formData</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">multipart/form-data</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Content-Length</span><span class="dl">"</span><span class="p">:</span> <span class="o">&lt;&lt;</span><span class="nx">video</span><span class="o">-</span><span class="nx">size</span><span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="nx">bytes</span><span class="o">&gt;&gt;</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//...</span>
    <span class="p">});</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="c1">//assuming variable 'file' of type Express.Multer.File</span>
<span class="nx">axios</span><span class="p">({</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.getguru.fitness/videos</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="nx">token</span>
  <span class="p">},</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">filename</span><span class="p">:</span> <span class="dl">'</span><span class="s1">workout.mp4</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">size</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
    <span class="na">domain</span><span class="p">:</span> <span class="dl">'</span><span class="s1">weightlifting</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">activity</span><span class="p">:</span> <span class="dl">'</span><span class="s1">squat</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">repCount</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
    <span class="na">source</span><span class="p">:</span> <span class="dl">'</span><span class="s1">my-service</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">formData</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">();</span>
  <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">fields</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">key</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">fields</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
  <span class="p">});</span>
  <span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">"</span><span class="s2">file</span><span class="dl">"</span><span class="p">,</span>  <span class="nx">file</span><span class="p">.</span><span class="nx">buffer</span> <span class="p">,</span> <span class="nx">file</span><span class="p">.</span><span class="nx">originalname</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">headers</span> <span class="o">=</span> <span class="nx">formData</span><span class="p">.</span><span class="nx">getHeaders</span><span class="p">()</span>
  <span class="nx">formData</span><span class="p">.</span><span class="nx">getLength</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="nx">length</span><span class="p">){</span>
    <span class="nx">headers</span><span class="p">[</span><span class="dl">"</span><span class="s2">content-length</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">length</span>
    <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span>
      <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span>
      <span class="nx">formData</span><span class="p">,</span>
      <span class="p">{</span>
        <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span>
      <span class="p">}</span>
    <span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//...</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//...</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//...</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">requests</span>


<span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="n">video_path</span><span class="p">,</span> <span class="n">access_token</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">activity</span><span class="p">,</span> <span class="n">rep_count</span> <span class="o">=</span> <span class="mi">3</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span>
        <span class="s">"https://api.getguru.fitness/videos"</span><span class="p">,</span>
        <span class="n">json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">"filename"</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">basename</span><span class="p">(</span><span class="n">video_path</span><span class="p">),</span>
            <span class="s">"size"</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">video_path</span><span class="p">),</span>
            <span class="s">"domain"</span><span class="p">:</span> <span class="n">domain</span><span class="p">,</span>
            <span class="s">"activity"</span><span class="p">:</span> <span class="n">activity</span><span class="p">,</span>
            <span class="s">"repCount"</span><span class="p">:</span> <span class="n">rep_count</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
            <span class="s">"Authorization"</span><span class="p">:</span> <span class="n">access_token</span>
        <span class="p">}</span>
    <span class="p">)</span>


<span class="k">def</span> <span class="nf">upload</span><span class="p">(</span><span class="n">video_path</span><span class="p">,</span> <span class="n">create_response</span><span class="p">):</span>
    <span class="n">json</span> <span class="o">=</span> <span class="n">create_response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s">"url"</span><span class="p">]</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s">"fields"</span><span class="p">]</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">video_path</span><span class="p">,</span> <span class="s">"rb"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span>
            <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s">"file"</span><span class="p">:</span> <span class="nb">file</span><span class="p">},</span>
        <span class="p">)</span>

<span class="c1"># access_token = ...
</span><span class="n">video_path</span> <span class="o">=</span> <span class="s">"path/to/video.mp4"</span>
<span class="n">create_response</span> <span class="o">=</span> <span class="n">create</span><span class="p">(</span><span class="n">video_path</span><span class="p">,</span> <span class="n">access_token</span><span class="p">,</span> <span class="s">"weightlifting"</span><span class="p">,</span> <span class="s">"squat"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">upload_response</span> <span class="o">=</span> <span class="n">upload</span><span class="p">(</span><span class="n">video_path</span><span class="p">,</span> <span class="n">create_response</span><span class="p">)</span>

</code></pre></div>
<p><code>POST https://api.getguru.fitness/videos</code></p>
<h4 id='request'>Request</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>filename</td>
<td>Yes</td>
<td>None</td>
<td>The name of the video file, including extension.</td>
</tr>
<tr>
<td>size</td>
<td>Yes</td>
<td>None</td>
<td>The size of the video file, in bytes.</td>
</tr>
<tr>
<td>source</td>
<td>No</td>
<td>None</td>
<td>The source of the video. If the video was captured by your service then enter your service&#39;s name for this field.</td>
</tr>
<tr>
<td>domain</td>
<td>No</td>
<td>None</td>
<td>The category of exercise being performed in the video. See the table below for accepted values.</td>
</tr>
<tr>
<td>activity</td>
<td>No</td>
<td>None</td>
<td>The movement being performed in the video. See the table below for accepted values.</td>
</tr>
<tr>
<td>repCount</td>
<td>No</td>
<td>None</td>
<td>The number of reps expected to be performed in the video. Omit if unknown.</td>
</tr>
</tbody></table>

<p>The currently accepted values for <code>domain</code> and <code>activity</code> are:</p>

<table><thead>
<tr>
<th>Domain</th>
<th>Activity</th>
</tr>
</thead><tbody>
<tr>
<td>weightlifting</td>
<td>bench_press, clean_and_jerk, deadlift, snatch, squat</td>
</tr>
<tr>
<td>calisthenics</td>
<td>bodyweight_squat, burpee, chin_up, lunge, push_up, sit_up</td>
</tr>
<tr>
<td>martial_arts</td>
<td>punch, front_kick</td>
</tr>
<tr>
<td>mobility</td>
<td>knee_to_chest</td>
</tr>
<tr>
<td>running</td>
<td>sprint</td>
</tr>
<tr>
<td>yoga</td>
<td>downward_dog</td>
</tr>
</tbody></table>
<h4 id='response'>Response</h4>
<p>The response is JSON and contains the following data:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Unique identifier for your video. You will use it to make calls to the API to fetch results or perform other operations on the video.</td>
</tr>
<tr>
<td>url</td>
<td>Location to which your video content will be uploaded. This upload must be <code>multipart/form-data</code> encoded.</td>
</tr>
<tr>
<td>fields</td>
<td>The signing fields which must be included in your form when you upload the video. Take a look at the example to see how to combine these fields with your video content.</td>
</tr>
</tbody></table>
<h3 id='get-video'>Get Video</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">axios</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.getguru.fitness/videos/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">videoId</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">Authorization</span><span class="p">:</span> <span class="nx">token</span>
    <span class="p">}</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">});</span>
</code></pre></div>
<p><code>GET https://api.getguru.fitness/videos/{id}?include=j2p,analysis</code></p>
<h4 id='request-2'>Request</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Yes</td>
<td>None</td>
<td>The ID of the video you wish to fetch data for.</td>
</tr>
<tr>
<td>include</td>
<td>No</td>
<td>None</td>
<td>A comma-separated list of additional fields you wish to return. Accepted values are <code>j2p</code>, <code>analysis</code>, and <code>objects</code>.</td>
</tr>
</tbody></table>
<h4 id='response-2'>Response</h4>
<p>The response is JSON and contains the following data:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>Indicating whether the video has been uploaded to Guru. Possible values are: <code>Pending</code> (if the video has not been uploaded yet), <code>Success</code>, or <code>Failed</code>.</td>
</tr>
<tr>
<td>reason</td>
<td>The reason that the analysis failed. Only present when status is <code>Failed</code></td>
</tr>
<tr>
<td>uri</td>
<td>The location from which the raw video can be downloaded.</td>
</tr>
<tr>
<td>overlays</td>
<td>Contains information about the overlays (e.g. wireframes) Guru has built for this video. The object will map the type of overlay to an object that has a <code>status</code> field. If the overlay has been built then it will also contain a <code>uri</code> field that is a link to download the overlayed video.</td>
</tr>
<tr>
<td>fps</td>
<td>The frame rate (in frames per second) of the uploaded video</td>
</tr>
<tr>
<td>analysis</td>
<td>Only present if specified in <code>include</code>. See the <a href="#get-analysis">Get Analysis</a> endpoint for the structure of this object. Contains a <code>status</code> field to indicate whether processing has completed.</td>
</tr>
<tr>
<td>j2p</td>
<td>Only present if specified in <code>include</code>. See the <a href="#get-joint-data">Get Joint Data</a> endpoint for the structure of this object. Contains a <code>status</code> field to indicate whether processing has completed.</td>
</tr>
<tr>
<td>objects</td>
<td>Only present if specified in <code>include</code>. Contains an array of each object detected in the video. Each object will contain an array of <code>boundingBoxes</code>, showing the location of that object at particular frames in the video.</td>
</tr>
</tbody></table>

<p>The currently supported overlay types are:</p>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>skeleton</td>
<td>Contains a wireframe drawing of the joints and major landmarks identified on the person.</td>
</tr>
<tr>
<td>all</td>
<td>Contains all supported overlay elements, including wireframes, rep counting, and analytics about the movement.</td>
</tr>
</tbody></table>
<h3 id='update-video'>Update Video</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">axios</span><span class="p">({</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">put</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.getguru.fitness/videos/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">videoId</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">Authorization</span><span class="p">:</span> <span class="nx">token</span>
    <span class="p">},</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">repCount</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">});</span>
</code></pre></div>
<p><code>PUT https://api.getguru.fitness/videos/{id}</code></p>
<h4 id='request-3'>Request</h4>
<p>The request payload should be in a JSON-encoded body. All of the fields are optional.
If a field is omitted, then the existing value will be preserved.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>repCount</td>
<td>No</td>
<td>None</td>
<td>The number of reps that were performed in the video.</td>
</tr>
<tr>
<td>domain</td>
<td>No</td>
<td>None</td>
<td>The category of exercise being performed in the video. See the table in Create Video for accepted values.</td>
</tr>
<tr>
<td>activity</td>
<td>No</td>
<td>None</td>
<td>The movement being performed in the video. See the table in Create Video for accepted values.</td>
</tr>
</tbody></table>
<h4 id='response-3'>Response</h4>
<p>The response is JSON and contains the ID of the video.</p>
<h3 id='get-analysis'>Get Analysis</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">axios</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.getguru.fitness/videos/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">videoId</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/analysis</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">Authorization</span><span class="p">:</span> <span class="nx">token</span>
    <span class="p">}</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>A successful response would look something like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Complete"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"weightlifting"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"activity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"squat"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"startTimestampMs"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
            </span><span class="nl">"midTimestampMs"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w">
            </span><span class="nl">"endTimestampMs"</span><span class="p">:</span><span class="w"> </span><span class="mi">789</span><span class="p">,</span><span class="w">
            </span><span class="nl">"analyses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"analysisType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HIP_KNEE_ANGLE_DEGREES"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"analysisScalar"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.34</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><code>GET https://api.getguru.fitness/videos/{id}/analysis</code></p>
<h4 id='request-4'>Request</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Yes</td>
<td>None</td>
<td>The ID of the video you wish to fetch analysis for.</td>
</tr>
</tbody></table>
<h4 id='response-4'>Response</h4>
<p>The response is JSON and contains the following data:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>Indicating where analysis was successfully performed. Possible values are: <code>Pending</code>, <code>Complete</code>, or <code>Failed</code>.</td>
</tr>
<tr>
<td>reason</td>
<td>The reason that the analysis failed. Only present when status is <code>Failed</code></td>
</tr>
<tr>
<td>domain</td>
<td>The category of exercise being performed in the video.</td>
</tr>
<tr>
<td>activity</td>
<td>The movement being performed in the video.</td>
</tr>
<tr>
<td>reps</td>
<td>An array of objects, each one an individual rep detected in the video. Each rep indicates the timestamp offsets within the video where it can be found (via <code>startTimestampMs</code>, <code>midTimestampMs</code>, and <code>endTimestampMs</code>). It also specifies an <code>analyses</code> array of objects, which contains the individual insights generated by the analysis.</td>
</tr>
</tbody></table>

<p>Some of the analyses on reps will include an <code>analysisOpinion</code> field. 
This is the opinion of the Guru platform on the quality of the rep on this particular metric.
For example, for the hip/knee angle analysis of a squat, 
Guru will have a better opinion of a user who sits lower in a squat as opposed to
one who sits higher. Possible values for this field are <code>good</code> or <code>bad</code>.</p>

<p>When set, <code>reason</code> will be one of the following values:</p>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>LOW_QUALITY_POSE_ESTIMATE</code></td>
<td>Guru couldn&#39;t confidently detect the body&#39;s position throughout the video</td>
</tr>
</tbody></table>
<h4 id='details-sprints'>Details - Sprints</h4>
<p>For sprints, the analysis field contains some additional fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fieldMarkers</td>
<td>Only present if the runner is on an American football field with 5-yard markers or if 10 yards have been marked with start and end cones. See below for a description of the values.</td>
</tr>
<tr>
<td>reps</td>
<td>A list containing one entry for each stride. A &quot;stride&quot; begins when the toe leaves the ground and ends when the same foot contacts the ground. See below for details on the fields in each rep.</td>
</tr>
<tr>
<td>runnerProgress</td>
<td>A list which represents a time-series of the distance the runner has traveled. Each entry in the list contains three fields: <code>distanceFromStart</code> (in meters), <code>frameIndex</code> and <code>timestamp</code> (in milliseconds). Note that <code>distanceFromStart</code> is negative when the runner hasn&#39;t yet crossed the starting line (e.g., if the runner is 1 meter <em>behind</em> the starting line 1 second into the video, then <code>distanceFromStart=-1</code> @ <code>timestamp=1000</code>)</td>
</tr>
</tbody></table>
<h5 id='field-markers'>Field Markers</h5>
<p>The <code>fieldMarkers</code> object has 4 possible keys: <code>startLine</code>, <code>middleLine</code>,
<code>finishLine</code>, and <code>cones</code>. The start, middle, and finish lines correspond to 0,
5, and 10 yards on an American football field. The start line is the line that
the runner crosses first and the end line is the line that they cross last.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>Either <code>YARD_LINE</code> or <code>CONE</code></td>
</tr>
<tr>
<td>position</td>
<td>Contains fields <code>x1</code>, <code>y1</code>, <code>x2</code>, and <code>y2</code>. If <code>YARD_LINE</code>, these fields represent the unnormalized coordinates of the line segment. If <code>CONE</code>, these fields represent a bounding-box that circumscribes the cone.</td>
</tr>
<tr>
<td>frame_idx</td>
<td>The frame index of the video corresponding to the detection timestamp: The timestamp (in milliseconds) corresponding to the detection</td>
</tr>
</tbody></table>
<h5 id='reps'>Reps</h5>
<p>Each entry in <code>reps</code> corresponds to a stride and contains the following fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>startTimestampMs</td>
<td>The timestamp at which the toe leaves the ground</td>
</tr>
<tr>
<td>midTimestampMs</td>
<td>The timestamp corresponding to the middle of the stride (defined as peak flexion at the hip)</td>
</tr>
<tr>
<td>endTimestampMs</td>
<td>The timestamp at which the foot touches back down onto the ground</td>
</tr>
<tr>
<td>analyses</td>
<td>A list of objects containing two fields: <code>analysisType</code> and <code>anaylsisScalar</code>. See below for details.</td>
</tr>
</tbody></table>

<p>Each entry in the <code>analyses</code> list contains these fields:</p>

<table><thead>
<tr>
<th>Analysis Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>IS_LEFT_LEG</td>
<td>1 if the left leg is the leg swinging forward in this stride, 0 if it&#39;s the right leg</td>
</tr>
<tr>
<td>STRIDE_AIR_TIME_MS</td>
<td>The time that the runner is in the air during this stride, equal to the duration between toe-off (<code>startTimestampMs</code> of this stride) and the touch-down of the opposite foot (<code>endTimestampMs</code> of the previous stride). This will be <code>null</code> for the first stride in the list since it isn&#39;t well defined without a previous stride.</td>
</tr>
<tr>
<td>STRIDE_GROUND_TIME_MS</td>
<td>The time that the runner is on the ground until the next stride begins. Ground time begins at the same instant that the air time ends, at touch-down of the opposite foot. This will also be <code>null</code> for the first stride in the list.</td>
</tr>
<tr>
<td>STRIDE_PEAK_FLEXION_ANGLE</td>
<td>The peak flexion angle of the leg during the stride</td>
</tr>
<tr>
<td>STRIDE_PEAK_FLEXION_ANGLE_TIMESTAMP</td>
<td>The timestamp at which the leg reaches the peak flexion angle</td>
</tr>
<tr>
<td>STRIDE_PEAK_EXTENSION_ANGLE</td>
<td>The peak extension angle of the leg during the stride</td>
</tr>
<tr>
<td>STRIDE_PEAK_EXTENSION_ANGLE_TIMESTAMP</td>
<td>The timestamp at which the leg reaches the peak extension angle</td>
</tr>
</tbody></table>
<h3 id='get-joint-data'>Get Joint Data</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">axios</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.getguru.fitness/videos/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">videoId</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/j2p</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">Authorization</span><span class="p">:</span> <span class="nx">token</span>
    <span class="p">}</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>A successful response would look something like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Complete"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"resolutionHeight"</span><span class="p">:</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w">
  </span><span class="nl">"resolutionWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">720</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jointToPoints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"leftAnkle"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="nl">"frame_idx"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"part"</span><span class="p">:</span><span class="w"> </span><span class="s2">"leftAnkle"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"x"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w">
          </span><span class="nl">"y"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"frame_idx"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="nl">"part"</span><span class="p">:</span><span class="w"> </span><span class="s2">"leftAnkle"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"x"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
          </span><span class="nl">"y"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.75</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.86</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"leftElbow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
    </span><span class="nl">"leftEye"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
    </span><span class="nl">"leftHand"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">....</span><span class="p">],</span><span class="w">
    </span><span class="nl">"leftHip"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
    </span><span class="nl">"leftKnee"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
    </span><span class="nl">"leftShoulder"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
    </span><span class="nl">"leftWrist"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
    </span><span class="nl">"rightElbow"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
    </span><span class="nl">"rightEye"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
    </span><span class="nl">"rightHand"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">....</span><span class="p">],</span><span class="w">
    </span><span class="nl">"rightHip"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
    </span><span class="nl">"rightKnee"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
    </span><span class="nl">"rightShoulder"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
    </span><span class="nl">"rightWrist"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"analysis"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"reps"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nl">"startTimestampMs"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="nl">"midTimestampMs"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w">
      </span><span class="nl">"endTimestampMs"</span><span class="p">:</span><span class="w"> </span><span class="mi">789</span><span class="p">,</span><span class="w">
      </span><span class="nl">"analyses"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="nl">"analysisType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HIP_KNEE_ANGLE_DEGREES"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"analysisScalar"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.34</span><span class="w">
      </span><span class="p">}]</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><code>GET https://api.getguru.fitness/videos/{id}/j2p</code></p>
<h4 id='request-5'>Request</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Yes</td>
<td>None</td>
<td>The ID of the video you wish to fetch joint-to-point (j2p) for.</td>
</tr>
</tbody></table>
<h4 id='response-5'>Response</h4>
<p>The response is JSON and contains the following data:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>Indicating where analysis was successfully performed. Possible values are: <code>Pending</code>, <code>Complete</code>, or <code>Failed</code>.</td>
</tr>
<tr>
<td>reason</td>
<td>The reason that the analysis failed. Only present when status is <code>Failed</code></td>
</tr>
<tr>
<td>resolutionHeight</td>
<td>The height of the video.</td>
</tr>
<tr>
<td>resolutionWidth</td>
<td>The width of the video.</td>
</tr>
<tr>
<td>analysis</td>
<td>This contains the rep information equivalent to that returned from the <code>Get Analysis</code> endpoint.</td>
</tr>
<tr>
<td>jointToPoints</td>
<td>An object containing one attribute for each joint being tracked. Each joint is an array of <code>JointFrame</code> objects, detailed below.</td>
</tr>
</tbody></table>

<p>The semantics of the <code>reason</code> field are identical to those of the <a href="#get-analysis">the
Analysis endpoint</a>.</p>

<p><code>JointFrame</code> objects define the information for a single joint for a single frame within the video.
They have the following structure:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>frame_idx</td>
<td>The index of the frame within the video.</td>
</tr>
<tr>
<td>part</td>
<td>The name of the joint.</td>
</tr>
<tr>
<td>position</td>
<td>An object containing an <code>x</code> and <code>y</code>, the 2D location of that joint within the video, relative to the resolution of the video. Each coordinate will be &gt;= 0 and &lt;= 1.</td>
</tr>
<tr>
<td>score</td>
<td>The confidence the model has in its prediction of this joint location within the frame. Value is &gt;= 0 and &lt;= 1.</td>
</tr>
<tr>
<td>timestamp</td>
<td>The timestamp of this frame within the video, measured in seconds.</td>
</tr>
</tbody></table>
<h2 id='errors'>Errors</h2>
<p>The Guru API uses the following error globally across all endpoints:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- The request did not contain the required fields, or some were invalid. Consult the endpoint&#39;s documentation.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- The request could not be authenticated. Ensure you are <a href="#authentication">specifying a valid authentication token</a>.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The resource requested no longer exists. If fetching an analysis then the video may have been deleted.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- The endpoint you called does not support the HTTP method specified.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- Requested an unsupported format. All endpoints currently serve JSON.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- Your service is making too many calls and has been throttled. Please wait before retrying and lower your call volume.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- An unexpected server-side error. Please reach out to Guru for resolution.</td>
</tr>
</tbody></table>

<aside class="notice">
If an endpoint varies its error codes then that will be noted explicitly in that endpoint's documentation. 
</aside>
<h1 id='guru-js'>Guru.js</h1>
<p>Guru.js is the Javascript framework that allows you to tell
the Guru AI platform how to process your video. The same code
runs on both the server-side API and on-device, allowing you to
write once and run anywhere.</p>

<p>Before you can begin writing Guru.js, you will need to create a Schema.
A <code>Schema</code> is a configuration that holds all the information Guru
needs to process a video. You can create a new Schema from
the <a href="https://console.getguru.fitness/schemas/new">Guru Console</a>.
We recommend starting from a template to get up and running faster.</p>

<p>A Schema holds three separate Guru.js functions:</p>

<ol>
<li><strong>Process</strong> - This function defines what AI operations should be carried out on each frame.</li>
<li><strong>Render</strong> - This function defines what visual rendering should be done on each frame of the video. It can be used to visualize the output of Guru&#39;s AI platform. It is optional.</li>
<li><strong>Analyze</strong> - This function runs once on the output of all the frames. It is used to perform final analysis on the video, such as counting the number of repetitions of a movement.</li>
</ol>

<p>Guru will call your <code>Process</code> function for individual frames within the video. It will then
pass the result of the AI operations to your <code>Render</code> function, so that you can modify
the display of the output video. Finally, it will pass the collection of <code>Process</code> results
to your <code>Analyze</code> function, so that you can perform aggregate analysis of the video. </p>

<p>We will now go over each function in more detail.</p>
<h2 id='process'>Process</h2>
<blockquote>
<p>The Process function allows you to perform AI operations on a frame within the video.</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="cm">/**
 * @param {Frame} frame - The frame to process
 * @return {*} - The output of processing for this frame.
 */</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">processFrame</span><span class="p">(</span><span class="nx">frame</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">Frame</span> <span class="p">{</span>

  <span class="cm">/**
   * Find objects of a specific type within the video.
   *
   * @param {(string|Array.&lt;string&gt;)} objectTypes - The type of the object to find.
   *    Can either be a string, in which case objects of a single type will be found, or an array of strings, in which case multiple object types will be found.
   * @param {boolean} keypoints - Flag indicating whether to include keypoints in the results. Defaults to true.
   * @return {Array.&lt;FrameObject&gt;} A list of FrameObject instances matching the given criteria.
   */</span>
  <span class="k">async</span> <span class="nx">findObjects</span><span class="p">(</span><span class="nx">objectTypes</span><span class="p">,</span> <span class="p">{</span><span class="nx">keypoints</span> <span class="o">=</span> <span class="kc">true</span><span class="p">}</span> <span class="o">=</span> <span class="p">{});</span>
<span class="p">}</span>
</code></pre></div>
<p>The Process function is responsible for performing AI operations on the frame,
such as object detection and pose estimation, and returning the results
of those operations. The function accepts a single argument of type <code>Frame</code>. 
This object provides an easy-to-use interface to the Guru AI Platform.</p>

<p>Refer to <a href="#appendix-a">Appendix A</a> for a definition of the common types used by <code>Frame</code>.</p>

<p>The output of the <code>Process</code> function will then be provided as input to the
<code>Render</code> and <code>Analyze</code> functions documented below.</p>

<blockquote>
<p>Example implementation that finds all of the people in the frame and outputs their location information</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">processFrame</span><span class="p">(</span><span class="nx">frame</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">objects</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">findObjects</span><span class="p">(</span><span class="dl">"</span><span class="s2">person</span><span class="dl">"</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">{</span><span class="na">people</span><span class="p">:</span> <span class="nx">objects</span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div><h2 id='render'>Render</h2>
<blockquote>
<p>The Render function allows you to modify the FrameCanvas with the output of the Process function.</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="cm">/**
 * @param {FrameCanvas} frameCanvas - A canvas for the current frame, on which draw operations can be made.
 * @param {*} processResult - The output of the Process function for this frame.
 */</span>
<span class="kd">function</span> <span class="nx">renderFrame</span><span class="p">(</span><span class="nx">frameCanvas</span><span class="p">,</span> <span class="nx">processResult</span><span class="p">)</span> <span class="p">{</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">FrameCanvas</span> <span class="p">{</span>

  <span class="cm">/**
   * Draw a box with the given color around this object's location onto the frame.
   *
   * @param {FrameObject} object - The object around which the box will be drawn.
   * @param {Color} color - The color of the box.
   * @param {number} width - The width of the box's border, in pixels. Defaults to 5.
   * @return {FrameCanvas} This FrameCanvas, that can be used to chain calls.
   */</span>
  <span class="nx">drawBoundingBox</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">color</span><span class="p">,</span> <span class="nx">width</span> <span class="o">=</span> <span class="mi">2</span><span class="p">);</span>

  <span class="cm">/**
   * Draw the skeleton for the given object onto the frame. Note that the object must have its keypoints
   * inferred in order to draw the skeleton.
   *
   * @param {FrameObject} object - The object whose skeleton will be drawn onto the canvas.
   * @param {Color} lineColor - The color of the lines connecting the keypoints in the skeleton.
   * @param {Color} keypointColor - The color of the circles representing the joint keypoints in the skeleton.
   * @param {number} lineWidth - The width, in pixels, of the lines connecting the keypoints. Defaults to 5.
   * @param {number} keypointRadius - The radius, in pixels, of the circles representing the keypoints. Defaults to 5.
   */</span>
  <span class="nx">drawSkeleton</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">lineColor</span><span class="p">,</span> <span class="nx">keypointColor</span><span class="p">,</span> <span class="nx">lineWidth</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">keypointRadius</span> <span class="o">=</span> <span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>The Render function receives two arguments: one of type <code>FrameCanvas</code>, defined below, 
and a second which is the output of the <code>Process</code> function for that frame. 
Your implementation can use the <code>FrameCanvas</code> object to modify the appearance of the 
output video, using information from the output of <code>Process</code>.</p>

<p>Refer to <a href="#appendix-a">Appendix A</a> for a definition of the common types used by <code>FrameCanvas</code>.</p>

<blockquote>
<p>Example implementation that draws a red box around each object found in the frame</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">function</span> <span class="nx">renderFrame</span><span class="p">(</span><span class="nx">frameCanvas</span><span class="p">,</span> <span class="nx">processResult</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">objects</span> <span class="o">=</span> <span class="nx">processResult</span><span class="p">.</span><span class="nx">objects</span><span class="p">;</span>
    <span class="nx">objects</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">object</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">frameCanvas</span><span class="p">.</span><span class="nx">drawBoundingBox</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></div><h2 id='analyze'>Analyze</h2>
<blockquote>
<p>The Analyze function allows you to operate on the output of multiple Process functions and return the analysis for the video.</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="cm">/**
 * @param {Array.&lt;FrameResult&gt;} frameResults - An array of the outputs of calls to the Process function.
 * @return {*} - The analysis result for this video
 */</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">analyzeVideo</span><span class="p">(</span><span class="nx">frameResults</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>

<span class="cm">/**
 * @typedef {Object} FrameResult
 * @property {number} frameIndex - The index of the frame within the video.
 * @property {number} timestampMs - The timestamp of the frame in milliseconds.
 * @property {*} returnValue - The value that was returned from the Process function for this frame.
 */</span>
</code></pre></div>
<p>The Analyze function receives one argument, an Array of <code>FrameResult</code> objects. 
This function can perform any kind of analysis required on the results of each Frame
to perform complex reasoning. It could, for example, count the number of repetitions
of a particular movement, or de-duplicate the names of unique objects found across the
entire video.</p>

<p>The output of this function will be the analysis result of the video. It will be accessible
from the <a href="https://docs.getguru.fitness/#get-analysis">Get Analysis</a> endpoint when using
server-side processing, or as the output of the SDK when performing on-device processing.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="cm">/**
 * Example implementation that reduces the FrameResults to an array of unique 
 * object types found across the video
 */</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">analyzeVideo</span><span class="p">(</span><span class="nx">frameResults</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">frameObjectTypes</span> <span class="o">=</span> <span class="nx">frameResults</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">frameResult</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">frameResult</span><span class="p">.</span><span class="nx">returnValue</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">object</span><span class="p">.</span><span class="nx">objectType</span><span class="p">;</span>
        <span class="p">});</span>
    <span class="p">}).</span><span class="nx">flat</span><span class="p">();</span>

    <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="k">new</span> <span class="nb">Set</span><span class="p">(</span><span class="nx">frameObjectTypes</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div><h2 id='appendix-a'>Appendix A</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="cm">/**
 * A two-dimensional box, indicating the bounds of something.
 *
 * @typedef {Object} Box
 * @property {Position} top_left - The top-left corner of the box.
 * @property {Position} bottom_right - The bottom-right corner of the box.
 */</span>

<span class="cm">/**
 * A colour, represented as an RGB value. Valid values for each are &gt;= 0 and &lt;= 255.
 *
 * @typedef {Object} Color
 * @property {number} r - The amount of red in the color.
 * @property {number} g - The amount of green in the color.
 * @property {number} b - The amount of blue in the color.
 */</span>

<span class="cm">/**
 * A single object present within a particular frame or image.
 *
 * @typedef {Object} FrameObject
 * @property {string} objectType - The type of the object.
 * @property {Box} boundary - The bounding box of the object, defining its location within the frame.
 * @property {Object.&lt;string, Position&gt;} keypoints - A map of the name of a keypoint, to its location within the frame.
 */</span>

<span class="cm">/**
 * The two-dimensional coordinates indicating the location of something.
 *
 * @typedef {Object} Position
 * @property {number} x - The x coordinate of the position.
 * @property {number} y - The y coordinate of the position.
 * @property {number} confidence - The confidence Guru has of the accuracy of this position. 0.0 implies no confidence, 1.0 implies complete confidence.
 */</span>
</code></pre></div>
<p>Documented here are common types that are used across each of the
<code>Process</code>, <code>Render</code>, and <code>Analyze</code> functions.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="typescript">typescript</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
